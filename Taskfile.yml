version: '3'

vars:
  MODULE_NAME: "Logging"

includes:
  version: ../Taskfile.version.yml
  production: ../Taskfile.prod.yml

tasks:
  default:
    desc: "Development build of the {{.MODULE_NAME}} module"
    cmds:
      - echo "Building {{.MODULE_NAME}} module..."
      - go mod download
      - go get -u
      - go mod verify
      - go mod tidy
      - go vet ./...
      - go build ./...
      - go test -race -run Test ./...
      - task: clean
      - echo "âœ“ {{.MODULE_NAME}} module build complete"

  prod:
    cmds:
      - task: production:prod

  clean:
    desc: "Clean up build artifacts"
    cmds:
      - rm -f coverage.*
      - echo "Build artifacts cleaned up"